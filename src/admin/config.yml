# Use DecapBridge PKCE auth
backend:
  name: git-gateway
  repo: RodolfoBaez/11tyDecapCms
  branch: main
  auth_type: pkce
  base_url: https://auth.decapbridge.com
  auth_endpoint: /sites/5a074181-f453-447e-a558-ec3afab000b3/pkce
  auth_token_endpoint: /sites/5a074181-f453-447e-a558-ec3afab000b3/token
  gateway_url: https://gateway.decapbridge.com
  commit_messages:
    create: Create {{collection}} "{{slug}}" - {{author-name}} <{{author-login}}> via DecapBridge
    update: Update {{collection}} "{{slug}}" - {{author-name}} <{{author-login}}> via DecapBridge
    delete: Delete {{collection}} "{{slug}}" - {{author-name}} <{{author-login}}> via DecapBridge
    uploadMedia: Upload "{{path}}" - {{author-name}} <{{author-login}}> via DecapBridge
    deleteMedia: Delete "{{path}}" - {{author-name}} <{{author-login}}> via DecapBridge
    openAuthoring: Message {{message}} - {{author-name}} <{{author-login}}> via DecapBridge

# Enable local backend for development (allows admin portal to work without DecapBridge)and test admin portal feature without having to rebuild the site)
local_backend: true 

# Enable PKCE fields (optional, recommended)
auth:
  email_claim: email
  first_name_claim: first_name
  last_name_claim: last_name
  avatar_url_claim: avatar_url

# Better Decap + Bridge logo (optional)
logo_url: https://decapbridge.com/decapcms-with-bridge.svg

# Add site links in Decap CMS (optional)
site_url: https://11tydecapcms.pages.dev

# --- Your existing settings below ---

# where the CMS will store uploaded images
# NOTE: This path should point to the public output folder
media_folder: "src/assets"
# where the CMS will reference the images in the markdown files
# NOTE: This path is relative to the site root (public/ output)
public_folder: "/assets"

# Configuration for collections
# Configuration for collections
collections:
  - name: "blog"
    label: "Blog"
    folder: "src/blog"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - { label: "Article Title", name: "title", widget: "string" }
      - { label: "Article Description", name: "description", widget: "string" }
      - { label: "Article Author", name: "author", widget: "string" }
      - { label: "Date", name: "date", widget: "datetime" } 
      - { label: "Tags(Write Featured to be in HomePage Featured Section)", name: "tags", widget: "list", default: ["post"] }      
      - { label: "Article Image", name: "image", widget: "image" }
      - { label: "Image caption", name: "imageAlt", widget: "string" }
      - { label: "Body", name: "body", widget: "markdown" }

 # NEW: Homepage content collection
  - label: "Pages"
    name: "pages"
    files:
      - label: "HomePage"
        name: "landingSection"
        file: "src/_data/homePage.json"
        fields:
          - label: "Landing Section"
            name: "hero"
            widget: "object"
            fields:
              - { label: "Landing Title", name: "title", widget: "string" }
              - { label: "Landing Introduction", name: "introduction", widget: "markdown" }
              - { label: "Primary Button Text", name: "primaryButtonText", widget: "string" }
              - { label: "Primary Button Link", name: "primaryButtonLink", widget: "string" }
              - { label: "Secondary Button Text", name: "secondaryButtonText", widget: "string" }
              - { label: "Secondary Button Link", name: "secondaryButtonLink", widget: "string" }
              - { label: "Landing Background Image", name: "heroImage", widget: "image" }

          - label: "Featured Articles Section"
            name: "featuredSection"
            widget: "object"
            fields:
              - { label: "Featured Articles Title", name: "title", widget: "string" }
              - { label: "Featured Articles Description", name: "description", widget: "markdown" }