# Use DecapBridge PKCE auth
backend:
  name: git-gateway
  repo: RodolfoBaez/11tyDecapCms
  branch: main
  auth_type: pkce
  base_url: https://auth.decapbridge.com
  auth_endpoint: /sites/5a074181-f453-447e-a558-ec3afab000b3/pkce
  auth_token_endpoint: /sites/5a074181-f453-447e-a558-ec3afab000b3/token
  gateway_url: https://gateway.decapbridge.com
  commit_messages:
    create: Create {{collection}} "{{slug}}" - {{author-name}} <{{author-login}}> via DecapBridge
    update: Update {{collection}} "{{slug}}" - {{author-name}} <{{author-login}}> via DecapBridge
    delete: Delete {{collection}} "{{slug}}" - {{author-name}} <{{author-login}}> via DecapBridge
    uploadMedia: Upload "{{path}}" - {{author-name}} <{{author-login}}> via DecapBridge
    deleteMedia: Delete "{{path}}" - {{author-name}} <{{author-login}}> via DecapBridge
    openAuthoring: Message {{message}} - {{author-name}} <{{author-login}}> via DecapBridge

# Enable local backend for development (allows admin portal to work without DecapBridge)and test admin portal feature without having to rebuild the site)
local_backend: true 

# Enable PKCE fields (optional, recommended)
auth:
  email_claim: email
  first_name_claim: first_name
  last_name_claim: last_name
  avatar_url_claim: avatar_url

# Better Decap + Bridge logo (optional)
logo_url: https://decapbridge.com/decapcms-with-bridge.svg

# Add site links in Decap CMS (optional)
site_url: https://11tydecapcms.pages.dev

# --- Your existing settings below ---

# where the CMS will store uploaded images
# NOTE: This path should point to the public output folder
media_folder: "src/assets"
# where the CMS will reference the images in the markdown files
# NOTE: This path is relative to the site root (public/ output)
public_folder: "/assets"

# Configuration for collections
collections:
  - label: "Site Pages" 
    name: "pages"
    files:
      # File 1: The Homepage
      - label: "HomePage"
        name: "landingSection"
        file: "src/_data/homePage.json"
        fields:
          - label: "Landing Section"
            name: "hero"
            widget: "object"
            fields:
              - { label: "Landing Title", name: "title", widget: "string" }
              - { label: "Landing Introduction", name: "introduction", widget: "markdown" }
              - { label: "Landing Background Image", name: "heroImage", widget: "image" }

          - label: "Featured Articles Section"
            name: "featuredSection"
            widget: "object"
            fields:
              - { label: "Featured Articles Title", name: "title", widget: "string", hint: "How to edit Research Highlights shown on homePage. Go to admin panel and edit the Research Highlight, only up to 4 highlights with the key word of 'featured' is written on the tag will be displayed on homePage " }
          
          - label: "Our Research Team"
            name: "teamSection"
            widget: "object"
            fields:
              - { label: "Team Section Title", name: "title", widget: "string", hint: "How edit team members shown on homePage. Go to the admin panel and edit the team members only the first 5 team members will be shown in the homepage."}

      # File 2: The Publications page 
      - label: "Publications Page"
        name: "publications"
        file: "src/_data/publications.json"
        fields:
          - label: "Publications Section"
            name: "publicationsSection"
            widget: "object"
            fields:
              - { label: "Publications Section Title", name: "title", widget: "string" }
              - label: "Content"
                name: "content"
                widget: "markdown"
                hint: "Write your text here. Use the link button in the toolbar to add links (e.g., to Google Scholar or ORCID)."

  # This is now collections[1]
  - name: "Research Highlights"
    label: "Research Highlights"
    folder: "src/article"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - { label: "Article Title", name: "title", widget: "string" }
      - { label: "Article Description", name: "description", widget: "string" }
      - { label: "Article Author", name: "author", widget: "string" }
      - { label: "Date", name: "date", widget: "datetime" } 
      - { label: "Tags(Write Featured to be in HomePage Featured Section, Limited to up to 4 Research Highlights)", name: "tags", widget: "list", default: ["post"] }      
      - { label: "Article Image", name: "image", widget: "image" }
      - { label: "Image caption", name: "imageAlt", widget: "string" }
      - { label: "Body", name: "body", widget: "markdown" }

  # This is now collections[2]
  - name: "team"
    label: "Team Members"
    folder: "src/team"
    create: true
    slug: "{{name | slug}}"
    fields:
      - { label: "Full Name", name: "name", widget: "string" }
      - { label: "Position Title", name: "position", widget: "string" }
      - { label: "Institution", name: "institution", widget: "string" }
      - { label: "Member Photo", name: "image", widget: "image" }
      - { label: "Photo Description (Alt)", name: "imageAlt", widget: "string" }
      - { label: "Bio/Details", name: "body", widget: "markdown" }

# 
# END OF FILE.
# The entire duplicated section below this line has been removed.
#