
# 11ty & Decap CMS Website for thinIceProject

This repository contains the source code for the thinIceProject website, a research group focused on freshwater ecology in the Hudson Valley. The site is built to be fast, secure, and easy to update using a modern web development stack.

The project uses the Eleventy (11ty) static site generator, with content managed through Decap CMS. Authentication for the CMS is handled by DecapBridge, allowing team members to easily write and publish articles without touching the code. The live site is hosted on Cloudflare Pages.

## Tech Stack

* **Static Site Generator:** Eleventy (11ty)
* **Templating Language:** Nunjucks (.njk)
* **CMS:** Decap CMS
* **CMS Authentication:** DecapBridge
* **Hosting:** Cloudflare Pages
* **Dependencies:** Node.js / npm

---

## Getting Started

To run this project on your local machine, follow these steps:

1.  **Clone the repository:**
    ```bash
    git clone [https://github.com/RodolfoBaez/11tyDecapCms.git](https://github.com/RodolfoBaez/11tyDecapCms.git)
    ```

2.  **Install dependencies:**
    ```bash
    npm install
    ```

3.  **Run the local development server:**
    ```bash
    npm start
    ```
    This will build the site and start a local server, typically at `http://localhost:8080`. The site will automatically rebuild and refresh when you save changes to your files.

---

## Project Structure

The project is organized to separate content, templates, configuration, and assets, which is a standard practice for 11ty sites.

```
/
├── public/           # Build output directory (generated by 11ty)
├── src/              # Source files for the website
│   ├── _includes/      # Reusable Nunjucks templates (layouts, components)
│   │   ├── article-snippet.njk
│   │   ├── article.njk
│   │   ├── base.njk
│   │   ├── footer.njk
│   │   └── header.njk
│   ├── admin/          # Decap CMS configuration files
│   │   ├── config.yml
│   │   └── index.html
│   ├── assets/         # Static assets like images
│   │   ├── logo.jpg
│   │   └── MohonkLake.jpeg
│   ├── blog/           # Content files (blog posts in Markdown)
│   ├── blog.njk        # Template for the main blog listing page
│   ├── index.njk       # Template for the site homepage
│   └── style.css       # Main stylesheet
├── .eleventy.js        # Main 11ty configuration file
├── LICENSE             # Project license
├── package.json        # Project dependencies and scripts
└── README.md           # You are here!
```

### Key Files and Directories Explained

* **`public/`**: This is the output directory. You should not edit files in here directly. Eleventy automatically generates this folder and all its contents every time it builds the site. It contains the final static HTML, CSS, and assets that get deployed to your web host.

* **`src/`**: This is your main source directory where all development happens.

* **`src/_includes/`**: This directory holds the building blocks of your site's layout. These are reusable template partials.
    * **`base.njk`**: The foundational template for your site. It contains the main `<html>`, `<head>`, and `<body>` structure, and other templates will extend from it.
    * **`header.njk` & `footer.njk`**: Reusable components for the site's header and footer, included in `base.njk`.
    * **`article.njk`**: The template that renders a single, full blog post. It pulls data from the Markdown files in the `src/blog` folder.
    * **`article-snippet.njk`**: A smaller template used to display a summary of a blog post. It's used on the `blog.njk` page to create a list of all articles.

* **`src/admin/`**: This folder contains everything needed to run the Decap CMS admin panel.
    * **`index.html`**: The entry point for the CMS, available at `/admin/` on the live site. It loads the necessary scripts for Decap CMS.
    * **`config.yml`**: The "brain" of the CMS. It defines the content structure (collections), media file locations, and the `git-gateway` backend configuration to handle authentication securely.

* **`src/assets/`**: This is where you store static assets like images, fonts, or other files that don't need to be processed but should be copied directly to the `public` directory.

* **`src/blog/`**: This is where all the content for blog posts and field reports is stored. Each `.md` (Markdown) file represents a single article. The content in these files is what the team will edit through the CMS interface.

* **Main Page Templates (in `src/`)**:
    * **`index.njk`**: The Nunjucks template for your site's homepage.
    * **`blog.njk`**: The main blog page, which loops through all posts and uses the `article-snippet.njk` template to display them in a list.
    * **`style.css`**: Your project's main stylesheet.

* **`.eleventy.js`**: The central configuration file for 11ty. It tells 11ty which files to copy directly to the output folder (like CSS and assets), defines custom filters (like formatting dates), and sets the input and output directories (`src` and `public`).

* **`package.json`**: Lists the project's Node.js dependencies (like Eleventy) and defines scripts for running commands like `npm start`.

---
### How Content Management Works

This setup allows for a seamless and secure content editing workflow:

1.  A team member navigates to the admin URL, for example, `https://your-site.pages.dev/admin/`.

2.  They are first prompted by **Cloudflare Zero Trust** to log in. Access is granted only to pre-approved users(the owner of the Cloudflare site must approve you), who can authenticate using their specific email address or a linked GitHub account.

3.  Once authenticated through Cloudflare, the **DecapBridge CMS** login page appears. The team member must have already accepted an invitation link to create their own Decap Bridge account with a unique password. They then log in with these credentials.

4.  After logging in, the Decap CMS interface loads, showing the content collections (e.g., "Blog Posts") 

5.  The user can create a new post or edit an existing one. When they click **"Publish,"** Decap CMS commits the changes directly to the project's GitHub repository.

6.  This new commit on GitHub automatically triggers a new build and deployment on **Cloudflare Pages**.

7.  Eleventy rebuilds the entire static site with the new or updated content, and the changes go live within minutes.
