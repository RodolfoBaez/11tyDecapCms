
# 11ty & Decap CMS Website for thinIceProject
placeholder expalin thiniceproject
## Tech Stack

* **Static Site Generator:** Eleventy (11ty)

* **Templating Language:** Nunjucks (.njk)

* **CMS:** Decap CMS

* **CMS Authentication:** DecapBridge

* **Hosting:** Cloudflare Pages

* **Dependencies:** Node.js / npm

## Getting Started Local Development & CMS Testing (The `npm run dev` Command)

For developing new features, creating new content structures (in `config.yml`), or testing content locally, the project is configured to prevent accidental publishing to GitHub.

### How to Use the Local Admin Portal(localhost:8080/admin)

1. Start the combined service: 
When you run `npm run dev`, it executes two scripts simultaneously:

    1. **`npm run start`**: Starts the Eleventy development server (live Demo Site).

    2. **`npm run cms-proxy`**: Starts the `netlify-cms-proxy-server`(allows for localhost:8080/admin to use admin features like `Publish` without pushing to github).

3. Navigate to the local admin portal: `http://localhost:8080/admin/`

4. Log in (prompted for DecapBridge login).

5. Make a change to a blog post and click `Publish`.

| Live Cloudflare Site (`pages.dev`) | Local Development (`localhost`) |
| :--- | :--- |
| **Backend:** DecapBridge / Git Gateway | **Backend:** `netlify-cms-proxy-server` |
| **Publish Action:** Creates Git Commit & pushes to GitHub | **Publish Action:** Writes changes directly to your local file system (e.g., `src/blog/`) |
| **Use Case:** Production publishing | **Use Case:** Safe local testing and development |

**Result:** The change is written to your local `.md` file, the Eleventy server rebuilds the site instantly, and the change is visible on `http://localhost:8080`. This isolated environment is perfect for editing content, debugging new CMS fields (in `config.yml`), or testing new UI components without triggering a rebuild on the live Cloudflare site (`pages.dev`) and affecting team members. Your local Git client (like GitHub Desktop) will show the file as **modified and uncommitted**, allowing you to review and commit the change only when ready.

## Project Structure

The project is organized to separate content, templates, configuration, and assets, which is a standard practice for 11ty sites.
```
/
├── public/           # Build output directory (generated by 11ty)
├── src/              # Source files for the website
│   ├── _includes/      # Reusable Nunjucks templates (layouts, components)
│   │   ├── article-snippet.njk
│   │   ├── article.njk
│   │   ├── base.njk
│   │   ├── footer.njk
│   │   └── header.njk
│   ├── admin/          # Decap CMS configuration files
│   │   ├── config.yml
│   │   └── index.html
│   ├── assets/         # Static assets like images
│   │   ├── logo.jpg
│   │   └── MohonkLake.jpeg
│   ├── blog/           # Content files (blog posts in Markdown)
│   ├── blog.njk        # Template for the main blog listing page
│   ├── index.njk       # Template for the site homepage
│   └── style.css       # Main stylesheet
├── .eleventy.js        # Main 11ty configuration file
├── package.json        # Project dependencies and scripts
└── README.md           # You are here!
```

### Key Files and Directories Explained

* **`public/`**: This is the output directory. You should not edit files in here directly. Eleventy automatically generates this folder and all its contents every time it builds the site. It contains the final static HTML, CSS, and assets that get deployed to your web host.

* **`src/`**: This is your main source directory where all development happens.

* **`src/_includes/`**: This directory holds the building blocks of your site's layout. These are reusable template partials.
    * **`base.njk`**: The foundational template for your site. It contains the main `<html>`, `<head>`, and `<body>` structure, and other templates will extend from it.
    * **`header.njk` & `footer.njk`**: Reusable components for the site's header and footer, included in `base.njk`.
    * **`article.njk`**: The template that renders a single, full blog post. It pulls data from the Markdown files in the `src/blog` folder.
    * **`article-snippet.njk`**: A smaller template used to display a summary of a blog post. It's used on the `blog.njk` page to create a list of all articles.

* **`src/admin/`**: This folder contains everything needed to run the Decap CMS admin panel.
    * **`index.html`**: The entry point for the CMS, available at `/admin/` on the live site. It loads the necessary scripts for Decap CMS.
    * **`config.yml`**: The "brain" of the CMS. It defines the content structure (collections), media file locations, and the `git-gateway` backend configuration to handle authentication securely.

* **`src/assets/`**: This is where you store static assets like images, fonts, or other files that don't need to be processed but should be copied directly to the `public` directory.

* **`src/blog/`**: This is where all the content for blog posts and field reports is stored. Each `.md` (Markdown) file represents a single article. The content in these files is what the team will edit through the CMS interface.

* **Main Page Templates (in `src/`)**:
    * **`index.njk`**: The Nunjucks template for your site's homepage.
    * **`blog.njk`**: The main blog page, which loops through all posts and uses the `article-snippet.njk` template to display them in a list.
    * **`style.css`**: Your project's main stylesheet.

* **`.eleventy.js`**: The central configuration file for 11ty. It tells 11ty which files to copy directly to the output folder (like CSS and assets), defines custom filters (like formatting dates), and sets the input and output directories (`src` and `public`).

* **`package.json`**: Lists the project's Node.js dependencies (like Eleventy) and defines scripts for running commands like `npm start`.

---
### How Content Management Works

This setup allows for a seamless and secure content editing workflow:

1.  A team member navigates to the admin URL, for example, `https://your-site.pages.dev/admin/`.

2.  They are first prompted by **Cloudflare Zero Trust** to log in. Access is granted only to pre-approved users, who can authenticate using their specific email address or a linked GitHub account.

<div style="display: flex; justify-content: space-around; align-items: flex-start;">
  <img src="https://github.com/user-attachments/assets/2a2a4ca3-8658-4597-b21c-5e9380153f68" alt="Screenshot 1" style="width: 48%; height: 350px; max-width: 350px;">
  <img src="https://github.com/user-attachments/assets/836d370e-50c8-4478-9daf-f9f4cc4b82bd" alt="Screenshot 2" style="width: 48%; height: 350px; max-width: 350px;">
</div>

3.  Once authenticated through Cloudflare, the **DecapBridge CMS** login page appears. The team member must have already accepted an invitation link to create their own Decap Bridge account with a unique password. They then log in with these credentials.

<img width="350" height="350" alt="Screenshot 2025-10-21 at 7 22 15 PM" src="https://github.com/user-attachments/assets/97dea566-5a3d-413e-90cb-02e3c17123da" />

4.  After logging in, the Decap CMS interface loads, showing the content collections (e.g., "Blog Posts")

<img width="1257" height="431" alt="Screenshot 2025-10-21 at 7 22 49 PM" src="https://github.com/user-attachments/assets/cb9fa355-13ca-4065-978f-9f2f2e7d31f7" />

5.  The user can create a new post or edit an existing one. When they click **"Publish,"** Decap CMS commits the changes directly to the project's GitHub repository.

6.  This new commit on GitHub automatically triggers a new build and deployment on **Cloudflare Pages**.

7.  Eleventy rebuilds the entire static site with the new or updated content, and the changes go live within minutes.


